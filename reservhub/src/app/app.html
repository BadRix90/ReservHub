<div class="layout-container">
  <mat-drawer-container class="layout-container">
    <mat-drawer
      #drawer
      [mode]="isMobile() ? 'over' : 'side'"
      [opened]="sidebarOpen()"
      class="sidebar">
      
      <div class="sidebar-content">
        @if (isMobile()) {
          <div class="sidebar-header">
            <mat-icon class="close-icon" (click)="closeSidebar()">close</mat-icon>
          </div>
        }

        <div class="logo-container" (click)="navigateToHome()">
          <img src="assets/logo/gsr@4x.png" alt="GSR Logo" class="logo">
        </div>

        <nav class="nav-section">
          <mat-nav-list class="nav-list">
            @for (item of navItems(); track item.label) {
              <mat-list-item 
                class="nav-item"
                (click)="navigateToSection(item)">
                <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
                <span class="nav-label">{{ item.label }}</span>
              </mat-list-item>
            }
          </mat-nav-list>
        </nav>

        <div class="theme-toggle">
          <button mat-icon-button class="theme-button" (click)="toggleTheme()">
            <mat-icon>{{ isDarkTheme() ? 'light_mode' : 'dark_mode' }}</mat-icon>
          </button>
        </div>
      </div>
    </mat-drawer>

    <mat-drawer-content>
      @if (!isMobile()) {
        <mat-toolbar color="primary">
          <button mat-icon-button (click)="toggleSidebar()">
            <mat-icon>menu</mat-icon>
          </button>
          <img src="assets/logo/gsr@4x.png" alt="GSR" style="height: 32px;">
        </mat-toolbar>
      }

      @if (isMobile()) {
        <mat-toolbar color="primary">
          <button mat-icon-button (click)="toggleSidebar()">
            <mat-icon>menu</mat-icon>
          </button>
          <img src="assets/logo/gsr@4x.png" alt="GSR" style="height: 32px;">
        </mat-toolbar>
      }

      <router-outlet />
    </mat-drawer-content>
  </mat-drawer-container>
</div>